<!DOCTYPE html>
<html>
    <head>
        <title>Configure page</title>
        <meta charset='utf-8'>
        <meta name='viewport' content='width=device-width, initial-scale=1'>
    </head>
    <style>
        body{min-width:1000px;font-family:'Roboto',Times,serif;overflow-x: hidden;}
        input{margin-bottom:3px;margin-top:0px;}
        label{margin-left:3px;margin-right:3px;font-size:14pt;}
        *{box-sizing:border-box;}
        .clear{clear:both;}
        .right{text-align:right;}
        .left{text-align:left;}
        .row{margin-right:-5px;margin-left:-5px;}
        .row:before,.row:after{display:table;content:' ';}
        .row:after{clear: both;}
        .col-xs-2{width:16.666666%;}
        .col-xs-4{width:33.333333%;}
        .col-xs-6{width:50%;}
        .col-xs-10{width:83.333333%;}
        .col-xs-12{width:100%;}
        .col-xs-2,.col-xs-4,.col-xs-6,.col-xs-10,.col-xs-12{position:relative;min-height:1px;padding-bottom:5px;padding-top:5px;padding-right:10px;padding-left:10px;float:left;}
        .border{border:1px solid #1b9c1a;border-radius:3px;}
        .btn-primary:hover{background-color:#0d690c;border-color:#0d690c;}
        .btn-primary:checked{background-color:#0d690c;border-color:#0d690c;}
        .btn-primary{color:#fff;background-color:#1b9c1a;border-color:#0026ea;}
        .btn{display:inline-block;padding:6px 12px;margin-bottom:0;font-size:16px;font-weight:400;line-height:1.42857143;text-align:center;white-space:nowrap;vertical-align:middle;touch-action:manipulation;cursor:pointer;user-select:none;background-image:none;border:1px solid transparent;border-radius:4px;}
    </style>
    <body>
        <div class='col-xs-12'>
            <div id='esion_container' class='border col-xs-12'>
                <div class='row col-xs-12'>
                    <div id='esion_label' class='col-xs-10'>
                        <h2>ESION</h2>
                    </div>
                    <div id='esion_version' class='col-xs-2 right'>
                        <h3>V 1.0</h3>
                    </div>
                </div>
                <div id='settings_container' class='col-xs-12'>
                    <div class='border col-xs-12'>
                        <div class='col-xs-12'>
                            <div id='edit_service'>
                                <div class='row col-xs-12'>
                                    <div class='row col-xs-2'>
                                        <label>SSID</label>
                                    </div>
                                    <div class='row col-xs-10'>
                                        <input id='server_ssid' class='col-xs-12' type='text' placeholder='Укажите wifi SSID.'>
                                    </div>
                                </div>
                                <div class='row col-xs-12'>
                                    <div class='row col-xs-2'>
                                        <label>PSWD</label>
                                    </div>
                                    <div class='row col-xs-10'>
                                  	    <input id='server_pswd' class='col-xs-12' type='text' placeholder='Укажите wifi PASSWORD.'>
                                    </div>
                                </div>
                                <div class='row col-xs-12'>
                                    <div class='row col-xs-2'>
                                        <label>URL</label>
                                    </div>
                                    <div class='row col-xs-10'>
                                        <input id='service_url' class='col-xs-12' type='text' placeholder='Укажите URL сервиса обслуживания.'>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id='under_line' class='row col-xs-12'>
                            <div id='esion_label' class='col-xs-6'>
                                <label>Идентификатор: </label>
                                <label id='id_label'>0000-000-0000-000-0000</label>
                            </div>
                            <div id='battery' class='col-xs-6 right'>
                                <label>Напряжение батареи: </label>
                                <label id='battery_label'>4.8 V</label>
                            </div>
                        </div>
                        <div class='clear'></div>
                        <div class='row col-xs-12'>
                            <div class='row col-xs-4'></div>
                            <div class='row col-xs-4'>
                                <button id='bt_save' class='btn btn-primary col-xs-12' onclick='saveSettings()'>Запомнить настройки</button>
                            </div>
                            <div class='row col-xs-4'></div>
                        </div>
                    </div>
                </div>
                <div id='author' class='col-xs-12 right'>
                  <label style='font-size:10px'>ООО "ИнфоТехСервис":</label>
                  <label style='font-size:10px'>(812)34-77-99-8</label>
                </dev>
            </div>
        </div>
    </body>
    <script>
        function changeSetting(id_) {
            e = document.getElementById(id_);
            if (e && e.value) {
                e.placeholder = e.value;
                e.value = '';
            }
        }
        function saveSettings() {
              var xhr = new XMLHttpRequest();
              xhr.open('POST', '/save', true);
              xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
              xhr.send('json=' + JSON.stringify({
                  wifi:{
                      ssid:document.getElementById('server_ssid').value,
                      pswd:document.getElementById('server_pswd').value
                  },
                  url:document.getElementById('service_url').value
              }));
              changeSetting('server_ssid');
              changeSetting('server_pswd');
              changeSetting('service_url');
        }
    </script>
</html>
